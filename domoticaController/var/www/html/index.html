<!DOCTYPE html>
<!--
TODO
encrypt (scrypt, aes), TLS (https://github.com/digitalbazaar/forge)
Fullscreen HTML API
-->
<html>
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>PindaNet Raspberry Pi</title>
    <link href='fullcalendar/packages/core/main.css' rel='stylesheet' />
    <link href='fullcalendar/packages/daygrid/main.css' rel='stylesheet' />
    <link href='fullcalendar/packages/timegrid/main.css' rel='stylesheet' />
    <link href='fullcalendar/packages/list/main.css' rel='stylesheet' />
    <style type="text/css">
      html {
        height: 100%;
        margin: 0;
        padding: 0;
      }
      body {
        background-size: cover;
        min-height: 100%;
        margin: 0;
        padding: 0;
        overflow: hidden;
        -moz-transition: background 1.5s linear;
        transition: background 1.5s linear;
        opacity: 1.0;
      }
      .daylySlideText {
        text-shadow: 0 0 1px black;
      }
      th, .dayname {
        color: white;
        text-shadow: 0 0 2px black;
        text-align: center;
        text-decoration: none;
        font-size: 20px;
        font-weight: bold;
      }
      .inline {
        display: inline-block;
        vertical-align: middle;
      }
      #content {
        position: absolute;
        transition: 1s;
        text-align: center;
      }
      button {
        background-color: rgba(128,128,128,0.5);
        border: 1px solid rgb(128,128,128);
        color: white;
        padding: 15px;
        margin-bottom: 5px;
        margin-right: 5px;
        text-align: center;
        text-decoration: none;
        display: inline-block;
        font-size: 30px;
        font-weight: bold;
        border-radius: 12px;
        box-shadow: 0 8px 16px 0 rgba(0,0,0,0.2), 0 6px 20px 0 rgba(0,0,0,0.19);
      }
      td button {
        padding: 0px;
        font-size: 27px;
      }
      #menuclock {
        color: white;
        font-size: 75px;
        text-shadow: 0 0 2px black;
        display: inline-block;
        position: relative;
        top: -22px;
      }
      #clock {
        color: white;
        font-size: 300px;
/*        text-shadow: 0 0 4px black; */
        -webkit-text-stroke: 2px black;
      }
      #clockdate, #clockday, #pres, #humi {
        position: absolute;
        color: white;
        text-align: center;
        font-size: 80px;
        font-family: sans-serif;
/*        text-shadow: 0 0 4px black; */
        -webkit-text-stroke: 1px black;
      }
      #clockday {
        top: -40px;
        left: 0;
        right: 0;
      }
      #clockdate {
        bottom: -40px;
        left: 0; 
        right: 0;
      }
      #temp {
        color: white;
        font-size: 250px;
        -webkit-text-stroke: 2px black;
      }
      #pres {
        top: -60px;
        left: 0;
        right: 0;
      }
      #humi {
        bottom: -60px;
        left: 0; 
        right: 0;
      }
      #forecast {
        width: 100%;
        border-collapse:collapse;
        top: 0;
        left: 0;
        position: fixed;
      }
      #forecast th {
        background-color: rgba(0,0,0,0.5);
        text-shadow: 0 0 1px black;
        font-size: 1em;
      }
      #forecast .bme280 {
        font-size: 28px;
        padding-top: 0px;
      }
      #forecast th a {
        color: white;
      }
      #forecast td {
        background-color: white;
      }
      #forecast svg {
        height: 20px;
        width: 20px;
        vertical-align: middle;
      }
      .cloud0-primitive {
        color: #c6c6c6;
        fill: #efefef;
      }
      .cloud1-primitive {
        color: #aaa;
        fill: #e5e5e5;
      }
      .cloud2-primitive {
        color: #828282;
        fill: #cccccc;
      }
      .cloud3-primitive {
        color: #696969;
        fill: #b2b2b2;
      }
      .cloud4-primitive {
        color: #424242;
        fill: #999999;
      }
      .fog-primitive {
        color: #999999;
        fill: #e5e5e5;
      }

      .sun-primitive {
        color: #ffee8a;
        fill: #ffaf22;
        stroke: #ffaf22;
      }
      .sunWinter-primitive {
        color: #ffee8a;
        fill: #fbbe40;
        stroke: #f5b93f;
      }

      .moon-primitive {
        fill: #354246;
      }

      .raindrop-primitive {
        fill: #0062bf;
      }

      .snowflake-primitive {
        fill: #47c0e3;
      }

      .lightning-primitive {
        fill: #ffdd15;
      }

      .terminalbox {
        background-color: rgba(0,0,0,0.5);
        border: 1px solid rgb(128,128,128);
        border-radius: 12px;
        box-shadow: 0 8px 16px 0 rgba(0,0,0,0.2), 0 6px 20px 0 rgba(0,0,0,0.19);
/*         margin: 3.5%; */
        width: 92%;
        padding: 1em;
        text-align: left;
        color: #fff;
        text-shadow: 0 0 2px black;
      }
      /* PinPad */
      #PINform input:focus,
      #PINform select:focus,
      #PINform textarea:focus,
      #PINform button:focus {
        outline: none;
      }
      #PINform {
        position: absolute;
        width: 300px; height: 400px;
        left: 50%;
        margin-left: -180px;
        top: 50%;
        margin-top: -215px;
        padding: 30px;
      }
      #PINbox {
        background-color: rgba(128,128,128,0.5);
        border: 1px solid rgb(128,128,128);
        border-radius: 12px;
        box-shadow: 0 8px 16px 0 rgba(0,0,0,0.2), 0 6px 20px 0 rgba(0,0,0,0.19);
        margin: 3.5%;
        width: 92%;
        font-size: 3em;
        text-align: center;
        color: #fff;
        text-shadow: 0 0 2px black;
      }
      .PINbutton {
        background-color: rgba(128,128,128,0.5);
        border: 1px solid rgb(128,128,128);
        box-shadow: 0 8px 16px 0 rgba(0,0,0,0.2), 0 6px 20px 0 rgba(0,0,0,0.19);
        color: #fff;
        text-shadow: 0 0 2px black;
        font-weight: bold;
        border-radius: 50%;
        font-size: 1.5em;
        text-align: center;
        width: 60px;
        height: 60px;
        margin: 7px 20px;
        padding: 0;
      }
      .clear, .enter {
        font-size: 1em;
      }
      .PINbutton:hover {
        box-shadow: #506CE8 0 0 1px 1px;
      }
      .PINbutton:active {
        background: rgba(80,108,232,0.5);
        color: #fff;
      }
      .clear:hover {
        box-shadow: #ff3c41 0 0 1px 1px;
      }
      .clear:active {
        background: rgba(255,60,65,0.5);
        color: #fff;
      }
      .enter:hover {
        box-shadow: #47cf73 0 0 1px 1px;
      }
      .enter:active {
        background: rgba(71,207,115,0.5);
        color: #fff;
      }
      /* End PinPad */
      .fc-toolbar.fc-header-toolbar {
        margin-bottom: 0;
      }
      #calendar {
        background: rgba(255,255,255,0.9);
      }
      #calendar .fc-dayGrid-view .fc-week-number, .fc-dayGrid-view .fc-day-number {
        padding: 0 2px;
      }
      #calendar th {
        color: black;
        text-shadow: none;
        text-align: center;
        text-decoration: none;
        font-size: 1em;
        font-weight: bold;
      }
      #calendar .fc-event {
        font-size: 1em;
        font-weight: bold;
        background-color: black;
        border: none;
      }
      #calendar tr:first-child > td > .fc-day-grid-event {
        margin-top: 0;
      }
      #thermostatUI {
        color: white;
        textshadow: 0 0 2px black;
        fontsize: 20px;
        font-weight: bold;
      }
    </style>
    <script src='fullcalendar/vendor/rrule.js'></script>
    <script src='fullcalendar/packages/core/main.js'></script>
    <script src='fullcalendar/packages/interaction/main.js'></script>
    <script src='fullcalendar/packages/daygrid/main.js'></script>
    <script src='fullcalendar/packages/timegrid/main.js'></script>
    <script src='fullcalendar/packages/list/main.js'></script>
    <script src='fullcalendar/packages/rrule/main.js'></script>
    <script src='fullcalendar/packages/core/locales/nl.js'></script>
    <script src='fullcalendar/ical.min.js'></script>
    <!--script src="sha.js"></script-->
    <script src="jsencrypt.js"></script>
    <script type="text/javascript">
    // PinPad
      function addNumber(event, element){
        document.getElementById('PINbox').value = document.getElementById('PINbox').value+element.value;
        event.stopPropagation();
      }
      function clearForm(event){
        document.getElementById('PINbox').value = "";
        event.stopPropagation();
      }
      var encryptedPIN="";
      var pubkey;
      var callback;
      function submitForm(event) {
        if (document.getElementById('PINbox').value == "") {
          alert("PINcode invoeren");
        } else {
          // Encrypt with the public key...
          var encrypt = new JSEncrypt();
          encrypt.setPublicKey(pubkey);
          encryptedPIN = encrypt.encrypt(document.getElementById('PINbox').value);
          document.getElementById('PINbox').value="";
          document.getElementById("content").innerHTML = "";
          callback(event);
        }
        event.stopPropagation();
      }
      function enterPIN(event) {
        document.getElementById("content").innerHTML = '<pre class="terminalbox">Even geduld...</pre>';
        centerContent();
	if (typeof event !== 'undefined') {
          event.stopPropagation();
        }
        var xhr = new XMLHttpRequest();
        xhr.open('POST', "bash.sh", true);
        xhr.onload = function(e) {
          if (this.status == 200) {
            pubkey = this.responseText;
            document.getElementById("content").innerHTML = `<form action="" method="" name="PINform" id="PINform" autocomplete="off"><input id="PINbox" value="" name="PINbox" disabled="" type="password"><br><input class="PINbutton" name="1" value="1" id="1" onclick="addNumber(event, this);" type="button"><input class="PINbutton" name="2" value="2" id="2" onclick="addNumber(event, this);" type="button"><input class="PINbutton" name="3" value="3" id="3" onclick="addNumber(event,this);" type="button"><br><input class="PINbutton" name="4" value="4" id="4" onclick="addNumber(event,this);" type="button"><input class="PINbutton" name="5" value="5" id="5" onclick="addNumber(event,this);" type="button"><input class="PINbutton" name="6" value="6" id="6" onclick="addNumber(event,this);" type="button"><br><input class="PINbutton" name="7" value="7" id="7" onclick="addNumber(event,this);" type="button"><input class="PINbutton" name="8" value="8" id="8" onclick="addNumber(event,this);" type="button"><input class="PINbutton" name="9" value="9" id="9" onclick="addNumber(event,this);" type="button"><br><input class="PINbutton clear" name="-" value="clear" id="-" onclick="clearForm(event);" type="button"><input class="PINbutton" name="0" value="0" id="0" onclick="addNumber(event,this);" type="button"><input class="PINbutton enter" name="+" value="enter" id="+" onclick="submitForm(event);" type="button"></form>`;
            centerContent();
            event.stopPropagation();
          }
        };
        xhr.send("command=genkey");
      }
    // End PinPad

      function setcursor() {
        if (window.location.hostname == "localhost") {
          document.body.style.cursor = "url(nocursor.gif), auto";
        } else {
          document.body.style.cursor = "default";
        }
      }
      var backgroundtimeinterval = 15; // change background every 15 minutes
      var backgroundtimecounter = backgroundtimeinterval;
/*
      function setstate(state) {
        var xhr = new XMLHttpRequest();
        xhr.open('POST', "setstate.php", true);
        xhr.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
        xhr.onload = function(e) {
          if (this.status == 200) {
console.log(state, this.responseText);
          }
        };
        xhr.send("state=" + state);
      }
*/
      function background() {
        if (encryptedPIN != "") {
          encryptedPIN="";
          document.getElementById("content").innerHTML = "";
        }
/*
// check sleep/wakeup
        var nowdate = new Date(); // Works in Chrome, Chromium, not in Firefox
        var n = nowdate.getDay();
        for (var i = 0; i < thermostat.length; i++) {
          if (thermostat[i].charAt(0) == n) {
	    var hour = parseInt(thermostat[i].substring(2, 4));
	    var min = parseInt(thermostat[i].substring(5, 7));
            var statedate = new Date();
            statedate.setHours(hour, min, 0, 0);
            var thermostatIndex = i;
// Chrome uses local time, Firefox universal time (adapt use with Firefox)
            var startinterval = statedate.getTime() - (1*60*1000); // 1 minute interval
            var endinterval = statedate.getTime() + (1*60*1000); // 1 minute interval
	    if (thermostat[i].substring(8) == "-off-") {
              if (nowdate.getTime() > startinterval) {
                if(nowdate.getTime() < endinterval) {
                  setstate("sleep");
                }
              }
            } else {
              if (nowdate.getTime() > startinterval) {
                if(nowdate.getTime() < endinterval) {
                  setstate("awake");
                }
              }
            }
          }
        }
*/
        backgroundtimecounter++;
        if (backgroundtimecounter >= backgroundtimeinterval) {
          backgroundtimecounter = 0;
          var xhr = new XMLHttpRequest();
          xhr.open('POST', "background.php", true);
          xhr.onload = function(e) {
            if (this.status == 200) {
              var lines = this.responseText.split("\n");
              var imageFileName = lines[0];
              document.body.style.backgroundImage = 'url(' + imageFileName + ')';
//              startBackgroundTimer = setTimeout(background, 864000);
              startBackgroundTimer = setTimeout(background, 60000); // elke minuut
            }
          };
          xhr.send();
        } else {
          startBackgroundTimer = setTimeout(background, 60000); // elke minuut
        }
      }
      function centerContent() {
        document.getElementById("content").style.top = (window.innerHeight - document.getElementById("content").offsetHeight)/2 - 8 + "px";
        document.getElementById("content").style.left = (window.innerWidth - document.getElementById("content").offsetWidth)/2 + "px";
      }
      function thermometer(event) {
        var xhrthermometer = new XMLHttpRequest();
        xhrthermometer.responseType = 'text';
        xhrthermometer.open('POST', "data/PresHumiTemp", true);
        xhrthermometer.onload = function(e) {
          if (this.status == 200) {
            var PresHumiTemp = this.responseText.split('\n');
/*
            document.getElementById("content").innerHTML = "<span id=\"temp\">" + parseFloat(PresHumiTemp[2]).toFixed(1) + " °C</span><br><span id=\"preshumi\">Luchtdruk: " + parseFloat(PresHumiTemp[0]).toFixed(0) + " hPa Vochtigheid: " + parseFloat(PresHumiTemp[1]).toFixed(0) + " % </span>";
            
            document.getElementById("content").innerHTML = "<span id=\"preshumi\">Luchtdruk: " + parseFloat(PresHumiTemp[0]).toFixed(0) + " hPa</span><br>";
            document.getElementById("content").innerHTML += "<span id=\"temp\">" + parseFloat(PresHumiTemp[2]).toFixed(1) + " °C</span><br>";
            document.getElementById("content").innerHTML += "<span id=\"preshumi\">Vochtigheid: " + parseFloat(PresHumiTemp[1]).toFixed(0) + " %</span>";
*/          
            var w = window.innerWidth;
            document.getElementById('content').innerHTML = '<div id="pres">Luchtdruk: ' + parseFloat(PresHumiTemp[0]).toFixed(0) + ' hPa</div>';
            document.getElementById('content').innerHTML += '<div id="temp" style="width: ' + w + 'px;">' + parseFloat(PresHumiTemp[2]).toFixed(1) + ' °C</div>';
            document.getElementById('content').innerHTML += '<div id="humi">Vochtigheid: ' + parseFloat(PresHumiTemp[1]).toFixed(0) + ' %</div>';

            centerContent();
          }
        };
        xhrthermometer.send();

        startTimer = setTimeout(thermometer, 60000); // herhaal elke 1 min
        event.stopPropagation();
      }
      function weather(event) {
        document.getElementById("content").innerHTML = '<pre class="terminalbox">Bezig met het ophalen van het weerbericht...</pre>';
        var xhrforecast = new XMLHttpRequest();
        xhrforecast.open('POST', "forecast.php", true);
        xhrforecast.onload = function(e) {
          if (this.status == 200) {
            document.getElementById("content").innerHTML = this.responseText;
          }
        };
        xhrforecast.send();

        startTimer = setTimeout(weather, 600000); // herhaal elke 10 min
        centerContent();
        event.stopPropagation();
      }
      function radioCommand(event, command, options) {
        var xhr = new XMLHttpRequest();
        xhr.open('POST', "mpc.php", true);
        xhr.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
        xhr.onload = function(e) {
          if (this.status == 200) {
            document.getElementById("radioinfo").innerHTML = this.responseText;
            centerContent();
          }
        };
        xhr.send("command=" + command + "&options=" + options);
        document.getElementById("radioinfo").innerHTML = "Even geduld, de zender wordt opgehaald...";
        event.stopPropagation();
      }
      function radio(event) {
        document.getElementById("content").innerHTML = `      
        <button onclick="radioCommand(event, 'play', 1);">Radio 1</button>
        <button onclick="radioCommand(event, 'play', 2);">Radio 2</button>
        <button onclick="radioCommand(event, 'play', 3);">Klara</button>
        <button onclick="radioCommand(event, 'play', 4);">Klara continuo</button>
        <button onclick="radioCommand(event, 'play', 5);">Studio Brussel</button>
        <button onclick="radioCommand(event, 'play', 6);">MNM</button>
        <button onclick="radioCommand(event, 'play', 7);">MNM Hits</button>
        <button onclick="radioCommand(event, 'play', 8);">VRT NWS</button>
        <button onclick="radioCommand(event, 'play', 9);">Ketnet Hits</button>
        <button onclick="radioCommand(event, 'play', 10);">Crooze</button>
        <button onclick="radioCommand(event, 'play', 11);">VBRO</button>
        <button onclick="radioCommand(event, 'play', 12);">Joe FM</button>
        <button onclick="radioCommand(event, 'play', 13);">Q-Music</button>
        <br>
        <pre class="terminalbox" style="text-align: center; display: inline-block; max-width: 736px;" id="radioinfo"></pre>
        <br>
        <button onclick="radioCommand(event, 'status', 1);">Status</button>
        <button onclick="radioCommand(event, 'stop', 1);">Stop</button>`
        centerContent();
        event.stopPropagation();
      }
/*
var motionPhoto;
var motionPhotos = "";
var motionPhotoPage;
      function motionNextPhoto(event) {
        motionPhoto += 1;
        if (motionPhoto == motionPhotos.length - 1) {
          motionPhoto = 0;
        }
        motionDisplayPhoto(event,motionPhoto);
        event.stopPropagation();
      }
      function motionPrevPhoto(event) {
        motionPhoto -= 1;
        if (motionPhoto < 0) {
          motionPhoto = motionPhotos.length - 2;
        }
        motionDisplayPhoto(event,motionPhoto);
        event.stopPropagation();
      }
      function motionDisplayPhoto(event, photoIndex) {
        motionPhoto = photoIndex;
        if (photoIndex < motionPhotos.length - 1) {
          document.getElementById("content").innerHTML = `      
          <div onclick="motionDisplayPhotoPage(event)" style="height: 480px; width: 800px; background-image: url('motion/fotos/` + motionPhotos[photoIndex] + `');">
          <p style="color: white;">` + motionPhotos[photoIndex].substring(0, 16) + `</p>
          <button style="position: absolute; right: 2px; top: 50%;" title="Volgende" onclick="motionNextPhoto(event);">&gt;</button>
          <button style="position: absolute; left: 2px; top: 50%;" title="Vorige" onclick="motionPrevPhoto(event);">&lt;</button>
          </div>`
          centerContent();
        }
        event.stopPropagation();
      }
      function motionNextPhotoPage(event) {
        motionPhotoPage += 1;
        if (motionPhotoPage == 4) {
          motionPhotoPage = 0;
        }
        motionDisplayPhotoPage(event);
        event.stopPropagation();
      }
      function motionPrevPhotoPage(event) {
        motionPhotoPage -= 1;
        if (motionPhotoPage == -1) {
          motionPhotoPage = 3;
        }
        motionDisplayPhotoPage(event);
        event.stopPropagation();
      }
      function motionDisplayPhotoPage(event) {
        var innerHTML = '<table style="border-spacing: 0; position: fixed; top: 0px; left:0px; height: 480px; width: 800px;">';
        for (tr = 0; tr < 5; tr++) {
          innerHTML += "<tr>";
          for (td = 0; td < 5; td++) {
            if ((tr * 5) + td + (motionPhotoPage * 25) < motionPhotos.length - 1) {
              innerHTML += `<td onclick="motionDisplayPhoto(event,` + ((tr * 5) + td + (motionPhotoPage * 25)) +`);" style="vertical-align: top; color: white; height: 96px; width: 160px; background-size: 100% 100%; background-repeat: no-repeat; background-image: url('motion/fotos/` + motionPhotos[(tr * 5) + td + (motionPhotoPage * 25)] + `');">`;
              innerHTML += motionPhotos[(tr * 5) + td + (motionPhotoPage * 25)].substring(0, 16);
            } else {
              innerHTML += `<td style="vertical-align: top; color: white; height: 96px; width: 160px;">`;
              innerHTML += "Foto " + ((tr * 5) + td + (motionPhotoPage * 25) + 1);
            }
            innerHTML += "</td>";
          }
          innerHTML += "</tr>";
        }
        innerHTML += '</table>';
        innerHTML += `<button style="position: fixed; right: 2px; top: 50%;" title="Volgende" onclick="motionNextPhotoPage(event);">&gt;</button>
        <button style="position: fixed; left: 2px; top: 50%;" title="Vorige" onclick="motionPrevPhotoPage(event);">&lt;</button>
        <button style="position: fixed; right: 2px; top: 2px;" title="Sluiten" onclick="">X</button>`
        document.getElementById("content").innerHTML = innerHTML;
        event.stopPropagation();
      }
*/
      var daylyMotionPhotos;
      var sliderItem = 0;
      var sliderTimeout;
      var sliderTimeoutActive = true;
      var sliderItemVar = 1;
      function daylySlideLoaded() {
        document.getElementById("daylySlideText").innerHTML = daylyMotionPhotos[sliderItem].split('\\').pop().split('/').pop().split('.').slice(0, -1).join('.');
        document.getElementById("daylySlidetransition").src = document.getElementById("daylySlide").src;
	if (sliderTimeoutActive) {
          sliderTimeout = setTimeout(function(){ daylymotionPlayer() }, 100);
	}
      }
      function daylySlideError() {
        sliderTimeout = setTimeout(function(){ daylymotionPlayer() }, 100);
console.log("The image " + daylyMotionPhotos[sliderItem] + " could not be loaded.");
      }
      function daylymotionPlayer() {
	sliderItem += sliderItemVar;
        if(sliderItem >= daylyMotionPhotos.length) {
          sliderItem = 0;
        } else if (sliderItem < 0) {
          sliderItem = sliderItem + daylyMotionPhotos.length;
        }
        document.getElementById("daylySlide").src = daylyMotionPhotos[sliderItem];
      }
      function daylySlideCommand(event, command) {
        switch(command) {
          case "play":
            if (document.getElementById("daylySlidePlayPause").innerHTML == "&lt;&gt;") {
              sliderTimeoutActive = true;
              sliderTimeout = setTimeout(function(){ daylymotionPlayer() }, 100);
              document.getElementById("daylySlidePlayPause").innerHTML = "||";
            } else {
              clearTimeout(sliderTimeout);
              sliderTimeoutActive = false;
              document.getElementById("daylySlidePlayPause").innerHTML = "&lt;&gt;";
            }
            break;
          case "backward":
            sliderItemVar = -1;
            sliderTimeout = setTimeout(function(){ daylymotionPlayer() }, 100);
            break;
          case "forward":
            sliderItemVar = 1;
            sliderTimeout = setTimeout(function(){ daylymotionPlayer() }, 100);
            break;
        }
        event.stopPropagation();
      }
      function timelapse(event) {
        var xhr = new XMLHttpRequest();
        xhr.open('POST', "daylymotion.php", true);
        xhr.onload = function(e) {
          if (this.status == 200) {
            daylyMotionPhotos = Object.values(JSON.parse(this.responseText));
            var innerHTML =  '<div style="position: absolute; height: 480px; width: 800px; left: 0; top: 0;"><img id="daylySlide" onload="daylySlideLoaded();" onerror="daylySlideError();"></div>';
            innerHTML += '<div id="daylySlideToplayer" style="position: absolute; height: 480px; width: 800px; left: 0; top: 0;"><img id="daylySlidetransition">';
            innerHTML += '<div id="daylySlideText" style="position: absolute; color: white;">Tekst</div>';
            innerHTML += '<div id="daylySlideCommand" style="position: absolute; color: white;">';
            innerHTML += '<button id="daylySlideSlowMotion" onclick="daylySlideCommand(event, \'backward\');">||&lt;</button>';
            innerHTML += '<button id="daylySlidePlayPause" onclick="daylySlideCommand(event, \'play\');">||</button>';
            innerHTML += '<button id="daylySlideSlowMotion" onclick="daylySlideCommand(event, \'forward\');">&gt;||</button>';
            innerHTML += '</div>';
            innerHTML += '</div>';
            document.getElementById("content").innerHTML = innerHTML;

            document.getElementById("daylySlideText").style.right = "8px";
            document.getElementById("daylySlideText").style.top = "8px";
            document.getElementById("daylySlideCommand").style.left = "8px";
            document.getElementById("daylySlideCommand").style.top = "8px";
            event.stopPropagation();
            sliderTimeout = setTimeout(function(){
              document.getElementById("content").style.top = "0";
              document.getElementById("content").style.left = "0";
              daylymotionPlayer()
            }, 100);
          }
        };
        xhr.send();
        event.stopPropagation();
      }
/*
      function motionDetection(event) {
        var xhr = new XMLHttpRequest();
        xhr.open('POST', "motion.php", true);
        xhr.onload = function(e) {
          if (this.status == 200) {
            motionPhotos = JSON.parse(this.responseText);
            motionPhoto = 0;
            motionPhotoPage = 0;
            motionDisplayPhotoPage(event);
            event.stopPropagation();
          }
        };
        xhr.send();
      }
*/
var thermostat = "";
loadThermostat();
      function saveThermostat() {
        // sorteer op tijd
        thermostat.sort();
        var xhr = new XMLHttpRequest();
        xhr.open('POST', "system.php", true);
        xhr.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
        xhr.onload = function(e) {
          if (this.status == 200) {
            getThermostatTemp();
          }
        };
        xhr.send("command=saveThermostat&json=" + btoa(thermostat.join(" ")));
      }
      function exportThermostat(event) {
        window.open("exportthermostat.php");
        event.stopPropagation();
      }
      function loadThermostat() {
        var xhr = new XMLHttpRequest();
 /*       
        xhr.open('POST', "thermostat.php", true);
        xhr.onload = function(e) {
          if (this.status == 200) {
            if (thermostat == "") {
              thermostat = JSON.parse(atob(this.responseText));
            }
            if (window.location.hostname == "localhost") { // enkel lokaal
              thermostatTimer = setTimeout(loadThermostat, 300000);
            }
          }
        };
*/
        xhr.responseType = 'text';
        xhr.open('POST', "data/thermostat", true);
        xhr.onload = function(e) {
          if (this.status == 200) {
            if (thermostat == "") {
              var raw = this.responseText;
              thermostat = raw.split(" ");
            }
          }
        };
        xhr.send();
      }
      function importThermostat(event) {
        document.getElementById("content").innerHTML = `      
        <form class="terminalbox" id="jsonFile" name="jsonFile" enctype="multipart/form-data" method="post">
            <h2 style="text-align: center;">Thermostaat importeren</h2>
            <input type='file' id='fileinput' onclick="event.stopPropagation();">
            <input type='button' id='btnLoad' value='Laden' onclick='loadFile();'>
        </form>`
        centerContent();
        event.stopPropagation();
      }
      function loadFile() {
        var input, file, fr;

        if (typeof window.FileReader !== 'function') {
          alert("The file API isn't supported on this browser yet.");
          return;
        }

        input = document.getElementById('fileinput');
        if (!input) {
          alert("Um, couldn't find the fileinput element.");
        }
        else if (!input.files) {
          alert("This browser doesn't seem to support the `files` property of file inputs.");
        }
        else if (!input.files[0]) {
          alert("Please select a file before clicking 'Load'");
        }
        else {
          file = input.files[0];
          fr = new FileReader();
          fr.onload = receivedText;
          fr.readAsText(file);
        }
      }
      function receivedText(e) {
        lines = e.target.result;
        thermostat = lines.split(" ");
        weeklyThermostat(e);
      }
      function outputUpdate(event, value, elmid, item) {
        if (elmid == "settemp") {
          if (isNaN(value)) {
            document.getElementById(elmid).value = "-off-"
          } else {
            var temp = Math.round(value * 2) / 2;
            temp = temp.toFixed(2);
            document.getElementById(elmid).value = temp;
          }
        } else {
          document.getElementById(elmid).value = ("0" + value).slice(-2);
        }
        thermostat[item] = thermostat[item].substring(0, 2) + document.getElementById("sethour").value + ":" + document.getElementById("setmin").value + ";" + ("0" + document.getElementById("settemp").value).slice(-5);
        event.stopPropagation();
      }
      function setThermostat(event, item) {
          var day = thermostat[item].substr(0,1);
          var hour = thermostat[item].substr(2,2);
          var min = thermostat[item].substr(5,2);
          var temp = thermostat[item].substr(8,5);

          document.getElementById("content").innerHTML = `<div class="dayname">
          <button onclick="weeklyThermostat(event);">&#x25C0;</button> ` +
          dayNames[day] + ` <input type="text" size="2" id="sethour" onchange="outputUpdate(event,value,'sethour',` + item + `)" onclick="event.stopPropagation();" value="` + hour + `">
          <input class="inline" type="range" orient="vertical" min="0" max="23" oninput="outputUpdate(event,value,'sethour',` + item + `)" onclick="event.stopPropagation();" value="` + hour + `">

          <input type="text" size="2" id="setmin" onchange="outputUpdate(event,value,'setmin',` + item + `)" onclick="event.stopPropagation();" value="` + min + `">
          <input class="inline" type="range" orient="vertical" min="0" max="59" oninput="outputUpdate(event,value,'setmin',` + item + `)" onclick="event.stopPropagation();" value ="` + min + `">

          <input type="text" size="5" id="settemp" onchange="outputUpdate(event,value,'settemp',` + item + `)" onclick="event.stopPropagation();" value="` + temp + `"> °C
          <input class="inline" type="range" orient="vertical" min="0" max="24" step=".05" oninput="outputUpdate(event,value,'settemp',` + item + `)" onclick="event.stopPropagation();" value="` + temp + `">
          <button onclick="outputUpdate(event,'-off-','settemp',` + item + `);">Uit</button>

          <button onclick="delTimeTemp(event,` + item + `);">&mdash;</button></div>`;
          event.stopPropagation();
      }
      function addTimeTemp(event, day) {
        thermostat.push(day + ";23:59;15.00");
        weeklyThermostat(event);
        event.stopPropagation();
      }
      function delTimeTemp(event, item) {
        thermostat.splice(item, 1);
        weeklyThermostat(event);
      }
      function displayHeatingThermostat() {
        var xhrHeating = new XMLHttpRequest();
        xhrHeating.responseType = 'text';
        xhrHeating.open('POST', "data/heating", true);
        xhrHeating.onload = function(e) {
          if (this.status == 200) {
            var heating = this.responseText.slice(0, -1);
            if (heating == "off") {
              document.getElementById("autoThermostat").style = "color: black;";
              document.getElementById("onThermostat").style = "color: black;";
              document.getElementById("offThermostat").style = "";
              document.getElementById("thermostatTemp").innerHTML = "Regeltemp: -- °C";
            } else if (heating == "on") {
              document.getElementById("autoThermostat").style = "color: black;";
              document.getElementById("onThermostat").style = "";
              document.getElementById("offThermostat").style = "color: black;";
              document.getElementById("thermostatTemp").innerHTML = "Regeltemp: -- °C";
            } else {
              document.getElementById("autoThermostat").style = "";
              document.getElementById("onThermostat").style = "color: black;";
              document.getElementById("offThermostat").style = "color: black;";

              var d = new Date();
              var weekday = d.getDay();
              var now = d.toLocaleTimeString().substring(0,5);
              var thermostatTemp = thermostat[thermostat.length - 1].slice(-5);
              for (var i in thermostat) {
                if (thermostat[i].substr(0,1) > weekday) {
                  break;
                } else if (thermostat[i].substr(0,1) < weekday) {
                  thermostatTemp = thermostat[i].slice(-5);
                } else if (thermostat[i].substr(2,5) < now) {
                  thermostatTemp = thermostat[i].slice(-5);
                }
              }
              if (thermostatTemp == "-off-") {
                thermostatTemp = "Uit";
              } else {
                thermostatTemp = parseFloat(thermostatTemp.substr(0,4)).toFixed(1) + " °C";
              }
              document.getElementById("thermostatTemp").innerHTML = "Regeltemp: " + thermostatTemp;
            }
            var xhrthermometer = new XMLHttpRequest();
            xhrthermometer.responseType = 'text';
            xhrthermometer.open('POST', "data/PresHumiTemp", true);
            xhrthermometer.onload = function(e) {
              if (this.status == 200) {
                var PresHumiTemp = this.responseText.split('\n');
                document.getElementById("roomTemp").innerHTML = "Kamertemp: " + parseFloat(PresHumiTemp[2]).toFixed(1) + " °C";
                centerContent();
              }
            };
            xhrthermometer.send();
          }
        };
        xhrHeating.send();
      }
      function getThermostatTemp() {
        var xhr = new XMLHttpRequest();
        xhr.responseType = 'text';
        xhr.open('POST', "data/thermostat", true);
        xhr.onload = function(e) {
          if (this.status == 200) {
            var raw = this.responseText;
            thermostat = raw.split(" ");
            tableel='<table style="width:790px">';
            tableel+='<tr>';
            for (var day = 0; day < 7; day++) {
              tableel += '<th>' + dayNames[day] + '</th>';
            }
            tableel+='</tr>';
            timetemp=0;
            timetempvalues=true;
            dayValues = [true, true, true, true, true, true, true];
            while (timetempvalues) {
              timetempvalues=false;
              var column = 0;
              tableel+='<tr>';
              for (var day = 0; day < 7; day++) {
                var occurred = 0;
                for (var item = 0; item <= thermostat.length; item++) {
                  if (typeof thermostat[item] === 'undefined') {
                    if (dayValues[day] && day == 6) {
                      tableel += '<td><button onclick="addTimeTemp(event,' + day + ');">&nbsp;+++++&nbsp;</button></td>';
                      column++;
                    }
                    dayValues[day] = false;
                    break;
                  } else if (thermostat[item].substring(0,1) == day) {
                    if (occurred == timetemp) {
                      var timeTempValue = thermostat[item].substring(8,13);
                      if (timeTempValue == "-off-") {
                        timeTempValue = "Uit";
                      } else {
                        timeTempValue = parseFloat(timeTempValue.substr(0,4)).toFixed(1) + ' °C';
                      }
                      tableel+='<td><button onclick="setThermostat(event,' + item + ');">' + thermostat[item].substring(2,7) + ' ' + timeTempValue + '</button></td>';
                      timetempvalues=true;
                      column++;
                      break;
                    }
                    occurred++;
                  } else if (thermostat[item].substring(0,1) > day) {
                    if (dayValues[day]) {
                      tableel += '<td><button onclick="addTimeTemp(event,' + day + ');">&nbsp;+++++&nbsp;</button></td>';
                      column++;
                    }
                    dayValues[day] = false;
                    break;
                  } else if (column < day) {
                    tableel += '<td></td>';
                    column++;
                  }
                }
              }
              tableel+='</tr>';
              timetemp++;
            }
            tableel+='<tr><td colspan="7">';
            tableel+=' <button id="onThermostat" onclick="onThermostat(event);">Aan</button>';
            tableel+=' <button id="offThermostat" onclick="offThermostat(event);">Uit</button>';
            tableel+=' <button id="autoThermostat" onclick="autoThermostat(event);">Auto</button>';
            tableel+=' <span class="terminalbox"><span id="thermostatTemp">Regeltemp: 5 °C</span></span>';
            tableel+=' <span class="terminalbox"><span id="roomTemp">Kamertemp: 5 °C</span></span>';
            tableel+=' <button id="resetThermostat" onclick="resetThermostat(event);">Reset</button>';
            tableel+=' <button title="Opslaan" onclick="exportThermostat(event);">&DownArrowBar;</button>';
            tableel+=' <button title="Laden" onclick="importThermostat(event);">&UpArrowBar;</button>';
            tableel+=' <button title="Naar thermostaat sturen" onclick="sendThermostat(event,this);">Send</button>';
            tableel+='</td></tr>';
            tableel+='</table>';
            document.getElementById("content").innerHTML = tableel;
            centerContent();
            displayHeatingThermostat();
          }
        };
        xhr.send();
      }
/*
      function sendBT(filename, value, callback) {
        var xhr = new XMLHttpRequest();
        xhr.responseType = 'text';
        xhr.open('POST', "sendBT.php", true);
        xhr.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
        xhr.onload = callback;
        xhr.send("file=" + filename + "&value=" + value);
      }
*/
      function sendThermostat(event, element) {
        element.style = "color: black;";
/*
        sendBT("thermostat","-1", function(e) {
          if (this.status == 200) {
            element.style = "";
            event.stopPropagation();
          }
        });
*/
        event.stopPropagation();
      }
      function autoThermostat(event) {
/*
        sendBT("heating","auto", function(e) {
          if (this.status == 200) {
            displayHeatingThermostat();
            centerContent();
            event.stopPropagation();
          }
        });
*/
        event.stopPropagation();
      }
      function onThermostat(event) {
/*
        sendBT("heating","on", function(e) {
          if (this.status == 200) {
            displayHeatingThermostat();
            centerContent();
            event.stopPropagation();
          }
        });
*/
        event.stopPropagation();
      }
      function offThermostat(event) {
/*
        sendBT("heating","off", function(e) {
          if (this.status == 200) {
            displayHeatingThermostat();
            centerContent();
            event.stopPropagation();
          }
        });
*/
        event.stopPropagation();
      }
      function resetThermostat(event) {
        event.stopPropagation();
        var raw = "0;07:20;22.00 0;22:45;-off- 1;07:20;22.00 1;22:45;-off- 2;07:20;22.00 2;22:45;-off- 3;07:20;22.00 3;22:45;-off- 4;07:20;22.00 4;22:45;-off- 5;07:20;22.00 5;22:45;-off- 6;07:20;22.00 6;22:45;-off-";
        thermostat = raw.split(" ");
        weeklyThermostat(event);
      }
      function weeklyThermostat(event) {
        document.getElementById("content").innerHTML = '<pre class="terminalbox">Bezig met het ophalen van de Thermostaat...</pre>';
        centerContent();
        event.stopPropagation();
        if (thermostat == "") {
          setTimeout(weeklyThermostat, 1000, event);
          return;
        }
        saveThermostat();
      }
      function thermostatUI (event, command, id) {
console.log(command);
        event.stopPropagation();
        switch (command) {
          case "Reset":
          case "Default":
            var xhr = new XMLHttpRequest();
            xhr.open('POST', "thermostatcommand.php", true);
            xhr.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
            xhr.onload = function(e) {
              if (this.status == 200) {
              }
            };
            xhr.send("command=" + command);
            break;
          case "Incr":
            var temp = parseFloat(document.getElementById(id).value);
            temp += 0.1;
            temp = temp.toFixed(2);
            document.getElementById(id).value = temp;
            break;
          case "Decr":
            var temp = parseFloat(document.getElementById(id).value);
            temp -= 0.1;
            temp = temp.toFixed(2);
            document.getElementById(id).value = temp;
            break;
          case "Manual":
          case "Uit":
            var xhr = new XMLHttpRequest();
            xhr.open('POST', "thermostatcommand.php", true);
            xhr.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
            var temp = document.getElementById(id).value;
            if (command == "Uit") {
              temp = "5.00";
              command = "Manual";
            }
            if (id == "kitchentemp") {
              xhr.send("command=" + command + "&room=kitchen&temp=" + temp);
            } else {
              xhr.send("command=" + command + "&room=living&temp=" + temp);
            }
            break;
          case "Auto":
            var xhr = new XMLHttpRequest();
            xhr.open('POST', "thermostatcommand.php", true);
            xhr.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
            if (id == "kitchentemp") {
              xhr.send("command=" + command + "&room=kitchen&temp=auto");
            } else {
              xhr.send("command=" + command + "&room=living&temp=auto");
            }
            break;
        }
      }
      function timerThermostat (event) {
        clearTimeout(startTimer);
        document.getElementById("content").innerHTML = `<div id="thermostatUI">
        <pre class="terminalbox" style="text-align: center; display: inline-block; max-width: 736px;" id="thermostattitle">Timer - Thermostaat</pre>
        <br>
        <button onclick="thermostatUI(event, 'Reset');">Reset</button>
        <button onclick="thermostatUI(event, 'Default');">Standaard</button>
        <br>
        <span class="terminalbox">Keuken:</span>
        <button onclick="thermostatUI(event, 'Auto', 'kitchentemp');">Auto</button>
        <button onclick="thermostatUI(event, 'Uit', 'kitchentemp');">Uit</button>
        <span class="terminalbox">Manueel op</span>
        <input type="text" size="5" name="kitchentemp" id="kitchentemp" value="22.20"> °C
        <button onclick="thermostatUI(event, 'Incr', 'kitchentemp');">+</button>
        <button onclick="thermostatUI(event, 'Decr', 'kitchentemp');">-</button>
        <button onclick="thermostatUI(event, 'Manual', 'kitchentemp');">Instellen</button>

        </div>`
        centerContent();

        event.stopPropagation();
      }
      function remoteCommand(event, command) {
        var xhr = new XMLHttpRequest();
        xhr.open('POST', "system.php", true);
        xhr.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
        xhr.onload = function(e) {
          if (this.status == 200) {
//            document.getElementById("content").innerHTML = '<pre class="terminalbox">' + this.responseText + "</pre>";
            document.getElementById("content").innerHTML = '';
            centerContent();
            switch (this.responseText) {
              case "WiFi AP actief":
                document.getElementById("statuswireless").innerHTML = `<img style="height: 2em;" src="emoji/network-wireless.svg">`;
                break;
              case "WiFi AP uitgeschakeld":
                document.getElementById("statuswireless").innerHTML = ``;
                break;              
              case "Stroomtoevoer naar Wall ingeschakeld.":
              case "Wall afgesloten en stroomtoevoer uitgeschakeld.":
                startTime();
                break;              
            }
          }
        };
        xhr.send("encpin=" + encryptedPIN + "&command=" + command);
        document.getElementById("content").innerHTML = '<pre class="terminalbox">Bezig met de ' + command + " opdracht</pre>";
        centerContent();
        event.stopPropagation();
      }
      function system(event) {
//        if (encryptedPIN == "") {
//          callback=system;
//          enterPIN(event);
//        } else {
          document.getElementById("content").innerHTML = '<pre class="terminalbox">Even geduld...</pre>';
          centerContent();
          var xhr = new XMLHttpRequest();
          xhr.open('POST', "system.php", true);
          xhr.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
          xhr.onload = function(e) {
            if (this.status == 200) {
              document.getElementById("content").innerHTML = this.responseText;
              centerContent();
            }
          };
          xhr.send("encpin=" + encryptedPIN + "&command=system");
          event.stopPropagation();
//        }
      }
      function parseICS(iCalendarData) {
        var jcalData = ICAL.parse(iCalendarData);
        var comp = new ICAL.Component(jcalData);
        var eventComps = comp.getAllSubcomponents("vevent");
        for (var key in eventComps) {
          // skip loop if the property is from prototype
          if (!eventComps.hasOwnProperty(key)) continue;
          var obj = eventComps[key];
          for (var prop in obj) {
            // skip loop if the property is from prototype
            if(!obj.hasOwnProperty(prop)) continue;
            if (prop === "parent") continue;
            var vevent;
            var icsevent = {};
            for (vevent in obj[prop][1]) {
              switch(obj[prop][1][vevent][0]) {
		case "exdate":
		  console.log(obj[prop][1][vevent]);
		  break;
                case "summary":
                  icsevent["title"] = obj[prop][1][vevent][3];
                  break;
                case "dtstart":
                  icsevent["start"] = obj[prop][1][vevent][3];
                  break;
                case "dtend":
                  icsevent["end"] = obj[prop][1][vevent][3];
                  break;
                case "location":
                  icsevent["location"] = obj[prop][1][vevent][3];
                  break;
                case "rrule": // https://fullcalendar.io/docs/v4/rrule-plugin
                  var rrule = {};
                  rrule["freq"] = obj[prop][1][vevent][3]["freq"];
                  rrule["interval"] = obj[prop][1][vevent][3]["interval"];
                  rrule["byweekday"] = obj[prop][1][vevent][3]["byday"];
                  rrule["until"] = obj[prop][1][vevent][3]["until"];
                  rrule["count"] = obj[prop][1][vevent][3]["count"];
                  icsevent["rrule"] = rrule;
                  break;
              }
            }
            if(icsevent.hasOwnProperty("rrule")){
              icsevent["rrule"]["dtstart"] = icsevent["start"];
              var dtstart = new Date(icsevent["start"]);
              var dtend = new Date(icsevent["end"]);
              icsevent["duration"] = dtend - dtstart;
            }
            icsevents.push(icsevent);
          }
        };
      }
      function getICS() {
        var xhttp = new XMLHttpRequest();
        xhttp.onreadystatechange = function() {
          if (this.readyState == 4 && this.status == 200) {
            parseICS(this.responseText);
            ICSfiles.shift();
            if (ICSfiles.length > 0) {
              getICS();
            } else {
              var calendarEl = document.getElementById('calendar');
              var calendar = new FullCalendar.Calendar(calendarEl, {
                plugins: [ 'interaction', 'dayGrid', 'rrule' ],
                header: {
                  left: '',
                  center: 'title',
                  right: ''
                },
                height: 480,
                locale: 'nl',
                editable: true,
                eventLimit: true, // allow "more" link when too many events
                events: icsevents
              });
              calendar.render();
            };
          };
        };
        xhttp.overrideMimeType('text/plain');
        xhttp.open("GET", ICSfiles[0], true);
        xhttp.send();
      }
      var icsevents = new Array();
      var ICSfiles = ["fullcalendar/snt.ics", "fullcalendar/basic.ics"];
      function calendar(event) {
	clearTimeout(startTimer);
        document.getElementById("content").innerHTML = '<div id="calendar"></div>';
        document.getElementById("content").style.top = "0";
        icsevents =[];
        ICSfiles = ["fullcalendar/snt.ics", "fullcalendar/basic.ics"];
        getICS();
        event.stopPropagation();
      }
      function fotokader(event) {
        background();
        document.getElementById("content").innerHTML = "";
        event.stopPropagation();
      }
/*
      function state(state) {
        var xhr = new XMLHttpRequest();
        xhr.responseType = 'text';
        xhr.open('POST', "state.php", true);
        xhr.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
        xhr.send("state=" + state);
        if (state == "sleep") {
          document.getElementById("content").innerHTML = "";
        }
      }
*/
      function menu() {
//        state("awake");
        clearTimeout(startTimer);
        document.getElementById("content").innerHTML = `<div style="width: 800px; text-align: center;">
        <img style="height: 100px;" onclick="fotokader(event);" src="emoji/framed_picture.svg">
        <img style="height: 100px;" onclick="thermometer(event);" src="emoji/thermometer.svg">
        <div style="overflow: hidden; display: inline-block; margin-bottom: -4px;" onclick="calendar(event);"><object style="height: 100px; pointer-events: none;" data="emoji/calendar.svg"></object></div>
        <div id="menuclock" onclick="startTime(event);"></div>
        <img style="height: 100px;" onclick="hourly=60;weather(event);" src="emoji/weather.svg">
        <img style="height: 100px;" onclick="weeklyThermostat(event);" src="emoji/thermostat.svg">
        <!--img style="height: 100px;" onclick="motionDetection(event);" src="emoji/surveillance-camera.svg"-->
        <img style="height: 100px;" onclick="timelapse(event);" src="emoji/timelapse.svg">
        <img style="height: 100px;" onclick="radio(event);" src="emoji/radio.svg">
        <img style="height: 100px;" onclick="remoteCommand(event,'softap');" src="emoji/network-wireless.svg">
        <img style="height: 100px;" onclick="location.reload();" src="emoji/refresh.svg">
        <img style="height: 100px;" onclick="remoteCommand(event,'reboot');" src="emoji/reboot.svg">
        <img style="height: 100px;" onclick="remoteCommand(event,'halt');" src="emoji/shutdown.svg">
        <img style="height: 100px;" onclick="remoteCommand(event,'rpiwall');" src="emoji/monitor.svg" onload="centerContent();">
        <!--img style="height: 100px;" onclick="state('sleep'); event.stopPropagation();" src="emoji/logout.svg"-->
        </div>`;
//        <img style="height: 100px;" onclick="startTime(event);" src="emoji/clock.svg">
//        document.getElementById("content").innerHTML = `<p style="width: 800px; text-align: center;"><button onclick="fotokader(event);">Fotokader</button><button onclick="startTime(event);">Klok</button><button onclick="thermometer(event);">Thermometer</button><button onclick="hourly=60;weather(event);">Weerbericht</button><button onclick="weeklyThermostat(event);">Thermostaat</button><button onclick="motionDetection(event);">Beweging</button><button onclick="radio(event);">Radio</button><button onclick="system(event);">Systeem</button></p>`;
        centerContent();
        event.stopPropagation();
      }
      window.addEventListener("click", startTime);

      var dayNames = new Array("Zondag","Maandag","Dinsdag","Woensdag","Donderdag","Vrijdag","Zaterdag");
      var monthNames = new Array("januari","februari","maart","april","mei","juni","juli","augustus","september","oktober","november","december");
//      function toLocaleDateString(datumobj) {
//        return dayNames[datumobj.getDay()] + '&nbsp;' + datumobj.getDate() + '&nbsp;' + monthNames[datumobj.getMonth()] + '&nbsp;' + datumobj.getFullYear();
//      }
      var startTimer;
      var roomTemp="20,0 °C";
      function getPresHumiTemp() {
        var xhrthermometer = new XMLHttpRequest();
        xhrthermometer.responseType = 'text';
        xhrthermometer.open('POST', "data/PresHumiTemp", true);
        xhrthermometer.onload = function(e) {
          if (this.status == 200) {
            var PresHumiTemp = this.responseText.split('\n');
            var Luchtdruk = parseFloat(PresHumiTemp[0]).toFixed(0) + ' hPa';
            roomTemp = parseFloat(PresHumiTemp[2]).toFixed(1) + ' °C';
            var Vochtigheid = parseFloat(PresHumiTemp[1]).toFixed(0) + ' %';
            getPresHumiTempTimer = setTimeout(getPresHumiTemp, 1000 * 60); // elke minuut
          }
        };
        xhrthermometer.send();
      }
      getPresHumiTemp();

      function startTime(event) {
        clearTimeout(startTimer);
        var today = new Date();
        var h = today.getHours();
        var m = today.getMinutes();
        m = checkTime(m);
	var w = window.innerWidth;
	document.getElementById('content').innerHTML = '<div id="clockday" onclick="timerThermostat(event);">' + dayNames[today.getDay()] + ' ' + roomTemp + '</div>';
	document.getElementById('content').innerHTML += '<div id="clock" style="width: ' + w + 'px;">' + h + ":" + m + '</div>';
	document.getElementById('content').innerHTML += '<div id="clockdate" onclick="menu();">' + today.getDate() + '&nbsp;' + monthNames[today.getMonth()] + '&nbsp;' + today.getFullYear() + '</div>';
        centerContent();
        startTimer = setTimeout(startTime, 1000); // elke seconde
        if (typeof event !== 'undefined') {
          event.stopPropagation();
        }
      }
/*
      function startMenuTime() {
        var today = new Date();
        var h = today.getHours();
        var m = today.getMinutes();
        m = checkTime(m);
        document.getElementById('menuclock').innerHTML = h + ":" + m;
//        centerContent();
//        startTimer = setTimeout(startMenuTime, 500);
        startTimer = setTimeout(startMenuTime, 1000); // elke seconde
      }
*/
      function checkTime(i) {
        if (i < 10) {i = "0" + i};  // add zero in front of numbers < 10
        return i;
      }
/* View in fullscreen */
/*
function fullscreen() {
  document.getElementById("content").innerHTML = "<button id=\"fullscreen\" onclick=\"openFullscreen(event);\";>Schermvullend</button>";
}
function openFullscreen(event) {
  var elem = document.documentElement;
  if (elem.requestFullscreen) {
    elem.requestFullscreen();
  } else if (elem.mozRequestFullScreen) { // Firefox
    elem.mozRequestFullScreen();
  } else if (elem.webkitRequestFullscreen) { // Chrome, Safari and Opera
    elem.webkitRequestFullscreen();
  } else if (elem.msRequestFullscreen) { // IE/Edge
    elem.msRequestFullscreen();
  }
  document.getElementById("content").innerHTML = "";
  event.stopPropagation();
}
*/
    </script>
  </head>
  <body onload="background();setcursor();startTime(event);">
<svg id="symbolDefs" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" height="0" width="0" style="position:absolute;">

  <symbol id="cloud">
    <path d="M55.7,5A23.94,23.94,0,0,0,34.37,18.05a9.9,9.9,0,0,0-12.78,5.56,15,15,0,0,0-1.71-.1A14.81,14.81,0,0,0,9.2,28,14.63,14.63,0,0,0,5,38.17v.21A14.83,14.83,0,0,0,19.88,53.06H75.59a14.3,14.3,0,0,0,3.67-28.14A23.93,23.93,0,0,0,55.7,5Z"></path>
    <image x="5" y="14" width="85" height="43" xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFYAAAAkCAMAAAAkYj0PAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAVUExURSgoKExpcaCgoFBQUG5ublBQUISEhI1fsT0AAAAHdFJOUxsACBsPFRpGXuFgAAABWElEQVRIx7XV25bDIAgF0BMu/v8nF/E+iWlqHNKVN3cpIMXxL4GFM3SQfTazkUyxk63oLYwlVSy2silXkS/wUrZS2a3ZCn1zsdSw7UUYijuHsTa1IvfwWrbSXLkc4N9r27JViwmM1UtWXA3hohQ41m6vl8FQZi7wu2z7KXPW4uRiZS+2AmdXN7DdQEQWQHYHlt6z0dXBBa2xeeVktiZc1jDoF5eGkI4d4MjKc7cNbZ3bqjocLLx5oPDYTaIftcfvAvcs2GFxVsJTOP1wO1jGdUSLaz/DWA1Tl45+Tkqul2ArcPzayGq8JafOUffP3TUp6JQs+Rptc6vtmtBkUw+dv0NzWG0PYf8O7Ym09+ITXyXOPZqEX95aFe3PKxRsL2XV3HR+ZALirPSF0ceHp6F51WBv1A22VaW2GHWzWvat8LOAPf4CrjrA+neNK7+PQBf/DmmLrId09/QDWyESBsibwBUAAAAASUVORK5CYII="></image>
  </symbol>

  <symbol id="fog">
    <g fill="#999999">
      <path d="M88.7,3H14.3C13.6,3,13,2.3,13,1.5S13.6,0,14.3,0h74.4C89.4,0,90,0.7,90,1.5S89.4,3,88.7,3z"></path>
      <path d="M75.7,11H1.3C0.6,11,0,10.3,0,9.5S0.6,8,1.3,8h74.4C76.4,8,77,8.7,77,9.5S76.4,11,75.7,11z"></path>
      <path d="M86.7,19H12.3c-0.7,0-1.3-0.7-1.3-1.5s0.6-1.5,1.3-1.5h74.4c0.7,0,1.3,0.7,1.3,1.5S87.4,19,86.7,19z"></path>
    </g>
  </symbol>

  <symbol id="lightning">
    <polygon fill="#ffdd15" points="19.6 23.42 12.74 20.39 15.55 5 5 24.49 12.08 27.51 7.49 45 19.6 23.42"></polygon>
  </symbol>

  <defs>
    <linearGradient id="moon-grad" x1="0%" y1="50%" x2="100%" y2="0%">
      <stop offset="0%" stop-color="#686e73" />
      <stop offset="100%" stop-color="#6a7075" />
    </linearGradient>
  </defs>
  <symbol id="moon">
    <path d="M28.43,0A28.44,28.44,0,0,1,32.3,14.32,28.61,28.61,0,0,1,3.69,42.93,28.71,28.71,0,0,1,0,42.66,28.59,28.59,0,1,0,28.43,0Z" fill="url(#moon-grad)"></path>
  </symbol>

  <symbol id="raindrop">
    <path fill="#0062bf" d="M2.5,13A2.5,2.5,0,0,1,.21,9.51l3.55-8a2.5,2.5,0,0,1,4.57,2l-3.55,8A2.5,2.5,0,0,1,2.5,13Z"></path>
  </symbol>

  <symbol id="snowflake">
    <path fill="#47c0e3" d="M11.68,4.47H8.85L10.27,2A1.35,1.35,0,1,0,7.93.67L6.51,3.12,5.1.67A1.35,1.35,0,0,0,3.26.18,1.35,1.35,0,0,0,2.76,2L4.18,4.47H1.35a1.35,1.35,0,1,0,0,2.7H4.18L2.76,9.62a1.35,1.35,0,0,0,.49,1.84A1.39,1.39,0,0,0,5.1,11L6.51,8.52,7.93,11a1.35,1.35,0,1,0,2.34-1.35L8.85,7.17h2.83a1.35,1.35,0,1,0,0-2.7Z"></path>
  </symbol>

  <defs>
    <linearGradient id="sun-inner-grad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" stop-color="#ffaf22" />
      <stop offset="100%" stop-color="#f09900" />
    </linearGradient>
    <radialGradient id="sun-glow-grad" cx="41" cy="41" r="41" gradientUnits="userSpaceOnUse">
      <stop offset="54%" stop-color="#d6b849"/>
      <stop offset="67%" stop-color="#ffce47"/>
      <stop offset="100%" stop-color="#ffdb73"/>
    </radialGradient>
    <radialGradient id="sun-winter-glow-grad" cx="45" cy="2" r="42" gradientUnits="userSpaceOnUse">
      <stop offset="54%" stop-color="#d6b849"/>
      <stop offset="67%" stop-color="#ffce47"/>
      <stop offset="100%" stop-color="#ffdb73"/>
    </radialGradient>
  </defs>
  <symbol id="sun">
    <path class="sun-glow" fill="url(#sun-glow-grad)" d="M66.64,47.86,82,41,66.64,34.12l9.84-13.66L59.76,22.22,61.46,5.47l-13.6,9.89L41,0,34.12,15.36,20.46,5.52l1.76,16.72L5.47,20.54l9.89,13.6L0,41l15.36,6.83L5.52,61.54l16.72-1.76L20.54,76.53l13.6-9.89L41,82l6.83-15.36,13.66,9.84L59.78,59.76l16.75,1.69Z"></path>
    <path class="sun-outer" fill="#ffd348" d="M19.28,53.5a25,25,0,1,0,9.15-34.16A25,25,0,0,0,19.28,53.5Z"></path>
    <path class="sun-inner" fill="url(#sun-inner-grad)" d="M22.74,51.5a21,21,0,1,0,7.69-28.69A21,21,0,0,0,22.74,51.5Z"></path>
  </symbol>

  <defs>
    <mask id="sunWinterMask">
      <rect x="0" y="0" width="100" height="100" fill="white"></rect>
    </mask>
  </defs>
  <symbol id="sunWinter">
    <g mask="url(#sunWinterMask)">
      <use class="sun-primitive" xlink:href="#sun" x="0" y="0" width="100" height="100" transform="translate(4,-40) scale(1,1)"></use>
    </g>
    <path fill="#333333" d="M88.29,2.7H1.71A1.56,1.56,0,0,1,0,1.35,1.56,1.56,0,0,1,1.71,0H88.29A1.56,1.56,0,0,1,90,1.35,1.56,1.56,0,0,1,88.29,2.7Z"></path>
  </symbol>

  <defs>

  <mask id="lightning_37_51_1_1_4">
    <rect x="0" y="0" width="100" height="100" fill="white"></rect>
    <use xlink:href="#lightning" fill="black" stroke="black" stroke-linejoin="round" stroke-width="8" x="0" y="0" width="100" height="100" transform="translate(37,51) scale(1,1)"></use>
  </mask>

  <mask id="cloud_43_37_063_063_5">
    <rect x="0" y="0" width="100" height="100" fill="white"></rect>
    <use xlink:href="#cloud" fill="black" stroke="black" stroke-linejoin="round" stroke-width="10" x="0" y="0" width="100" height="100" transform="translate(43,37) scale(0.63,0.63)"></use>
  </mask>

  <mask id="cloud_3_18_1_1_5">
    <rect x="0" y="0" width="100" height="100" fill="white"></rect>
    <use xlink:href="#cloud" fill="black" stroke="black" stroke-linejoin="round" stroke-width="10" x="0" y="0" width="100" height="100" transform="translate(3,18) scale(1,1)"></use>
  </mask>
  </defs>

  <symbol id="s10">
    <use xlink:href="#cloud" fill="#999999" x="0" y="0" width="100" height="100" transform="translate(3,18) scale(1,1)"></use>
    <use xlink:href="#raindrop"  x="0" y="0" width="100" height="100" transform="translate(18,78) scale(1,1)"></use>
    <use xlink:href="#raindrop"  x="0" y="0" width="100" height="100" transform="translate(32,87) scale(1,1)"></use>
    <use xlink:href="#raindrop"  x="0" y="0" width="100" height="100" transform="translate(47,79) scale(1,1)"></use>
    <use xlink:href="#raindrop"  x="0" y="0" width="100" height="100" transform="translate(60,78) scale(1,1)"></use>
    <use xlink:href="#raindrop"  x="0" y="0" width="100" height="100" transform="translate(74,87) scale(1,1)"></use>
  </symbol>
  <symbol id="s11">
    <g mask="url(#lightning_37_51_1_1_4)">
      <use xlink:href="#cloud" fill="#999999" x="0" y="0" width="100" height="100" transform="translate(3,18) scale(1,1)"></use>
    </g>
    <use xlink:href="#lightning"  x="0" y="0" width="100" height="100" transform="translate(37,51) scale(1,1)"></use>
    <use xlink:href="#raindrop"  x="0" y="0" width="100" height="100" transform="translate(18,78) scale(1,1)"></use>
    <use xlink:href="#raindrop"  x="0" y="0" width="100" height="100" transform="translate(29,87) scale(1,1)"></use>
    <use xlink:href="#raindrop"  x="0" y="0" width="100" height="100" transform="translate(55,79) scale(1,1)"></use>
    <use xlink:href="#raindrop"  x="0" y="0" width="100" height="100" transform="translate(68,78) scale(1,1)"></use>
    <use xlink:href="#raindrop"  x="0" y="0" width="100" height="100" transform="translate(82,87) scale(1,1)"></use>
  </symbol>
  <symbol id="s12">
    <use xlink:href="#cloud" fill="#b2b2b2" x="0" y="0" width="100" height="100" transform="translate(3,18) scale(1,1)"></use>
    <use xlink:href="#snowflake"  x="0" y="0" width="100" height="100" transform="translate(30,79) scale(1,1)"></use>
    <use xlink:href="#raindrop"  x="0" y="0" width="100" height="100" transform="translate(46,86) scale(1,1)"></use>
    <use xlink:href="#raindrop"  x="0" y="0" width="100" height="100" transform="translate(60,80) scale(1,1)"></use>
  </symbol>
  <symbol id="s13">
    <use xlink:href="#cloud" fill="#b2b2b2" x="0" y="0" width="100" height="100" transform="translate(3,18) scale(1,1)"></use>
    <use xlink:href="#snowflake"  x="0" y="0" width="100" height="100" transform="translate(30,79) scale(1,1)"></use>
    <use xlink:href="#snowflake"  x="0" y="0" width="100" height="100" transform="translate(44,88) scale(1,1)"></use>
    <use xlink:href="#snowflake"  x="0" y="0" width="100" height="100" transform="translate(58,79) scale(1,1)"></use>
  </symbol>
  <symbol id="s14">
    <g mask="url(#lightning_37_51_1_1_4)">
      <use xlink:href="#cloud" fill="#b2b2b2" x="0" y="0" width="100" height="100" transform="translate(3,18) scale(1,1)"></use>
    </g>
    <use xlink:href="#lightning"  x="0" y="0" width="100" height="100" transform="translate(37,51) scale(1,1)"></use>
    <use xlink:href="#snowflake"  x="0" y="0" width="100" height="100" transform="translate(26,79) scale(1,1)"></use>
    <use xlink:href="#snowflake"  x="0" y="0" width="100" height="100" transform="translate(52,88) scale(1,1)"></use>
    <use xlink:href="#snowflake"  x="0" y="0" width="100" height="100" transform="translate(66,79) scale(1,1)"></use>
  </symbol>
  <symbol id="s15">
    <use xlink:href="#cloud" fill="#dddddd" x="0" y="0" width="100" height="100" transform="translate(3,18) scale(1,1)"></use>
    <use xlink:href="#fog"  x="0" y="0" width="100" height="100" transform="translate(0,76) scale(1,1)"></use>
  </symbol>
  <symbol id="s22">
    <g mask="url(#lightning_37_51_1_1_4)">
      <use xlink:href="#cloud" fill="#b2b2b2" x="0" y="0" width="100" height="100" transform="translate(3,18) scale(1,1)"></use>
    </g>
    <use xlink:href="#lightning"  x="0" y="0" width="100" height="100" transform="translate(37,51) scale(1,1)"></use>
    <use xlink:href="#raindrop"  x="0" y="0" width="100" height="100" transform="translate(29,78) scale(1,1)"></use>
    <use xlink:href="#raindrop"  x="0" y="0" width="100" height="100" transform="translate(50,87) scale(1,1)"></use>
    <use xlink:href="#raindrop"  x="0" y="0" width="100" height="100" transform="translate(65,78) scale(1,1)"></use>
  </symbol>
  <symbol id="s23">
    <g mask="url(#lightning_37_51_1_1_4)">
      <use xlink:href="#cloud" fill="#b2b2b2" x="0" y="0" width="100" height="100" transform="translate(3,18) scale(1,1)"></use>
    </g>
    <use xlink:href="#lightning"  x="0" y="0" width="100" height="100" transform="translate(37,51) scale(1,1)"></use>
    <use xlink:href="#snowflake"  x="0" y="0" width="100" height="100" transform="translate(27,79) scale(1,1)"></use>
    <use xlink:href="#raindrop"  x="0" y="0" width="100" height="100" transform="translate(50,86) scale(1,1)"></use>
    <use xlink:href="#raindrop"  x="0" y="0" width="100" height="100" transform="translate(64,80) scale(1,1)"></use>
  </symbol>
  <symbol id="s30">
    <g mask="url(#lightning_37_51_1_1_4)">
      <use xlink:href="#cloud" fill="#cccccc" x="0" y="0" width="100" height="100" transform="translate(3,18) scale(1,1)"></use>
    </g>
    <use xlink:href="#lightning"  x="0" y="0" width="100" height="100" transform="translate(37,51) scale(1,1)"></use>
    <use xlink:href="#raindrop"  x="0" y="0" width="100" height="100" transform="translate(28,87) scale(1,1)"></use>
    <use xlink:href="#raindrop"  x="0" y="0" width="100" height="100" transform="translate(58,78) scale(1,1)"></use>
  </symbol>
  <symbol id="s31">
    <g mask="url(#lightning_37_51_1_1_4)">
      <use xlink:href="#cloud" fill="#cccccc" x="0" y="0" width="100" height="100" transform="translate(3,18) scale(1,1)"></use>
    </g>
    <use xlink:href="#lightning"  x="0" y="0" width="100" height="100" transform="translate(37,51) scale(1,1)"></use>
    <use xlink:href="#snowflake"  x="0" y="0" width="100" height="100" transform="translate(26,88) scale(1,1)"></use>
    <use xlink:href="#raindrop"  x="0" y="0" width="100" height="100" transform="translate(58,79) scale(1,1)"></use>
  </symbol>
  <symbol id="s32">
    <g mask="url(#lightning_37_51_1_1_4)">
      <use xlink:href="#cloud" fill="#999999" x="0" y="0" width="100" height="100" transform="translate(3,18) scale(1,1)"></use>
    </g>
    <use xlink:href="#lightning"  x="0" y="0" width="100" height="100" transform="translate(37,51) scale(1,1)"></use>
    <use xlink:href="#snowflake"  x="0" y="0" width="100" height="100" transform="translate(15,79) scale(1,1)"></use>
    <use xlink:href="#raindrop"  x="0" y="0" width="100" height="100" transform="translate(30,86) scale(1,1)"></use>
    <use xlink:href="#raindrop"  x="0" y="0" width="100" height="100" transform="translate(55,80) scale(1,1)"></use>
    <use xlink:href="#snowflake"  x="0" y="0" width="100" height="100" transform="translate(66,88) scale(1,1)"></use>
    <use xlink:href="#raindrop"  x="0" y="0" width="100" height="100" transform="translate(82,80) scale(1,1)"></use>
  </symbol>
  <symbol id="s33">
    <g mask="url(#lightning_37_51_1_1_4)">
      <use xlink:href="#cloud" fill="#cccccc" x="0" y="0" width="100" height="100" transform="translate(3,18) scale(1,1)"></use>
    </g>
    <use xlink:href="#lightning"  x="0" y="0" width="100" height="100" transform="translate(37,51) scale(1,1)"></use>
    <use xlink:href="#snowflake"  x="0" y="0" width="100" height="100" transform="translate(26,88) scale(1,1)"></use>
    <use xlink:href="#snowflake"  x="0" y="0" width="100" height="100" transform="translate(58,79) scale(1,1)"></use>
  </symbol>
  <symbol id="s34">
    <g mask="url(#lightning_37_51_1_1_4)">
      <use xlink:href="#cloud" fill="#999999" x="0" y="0" width="100" height="100" transform="translate(3,18) scale(1,1)"></use>
    </g>
    <use xlink:href="#lightning"  x="0" y="0" width="100" height="100" transform="translate(37,51) scale(1,1)"></use>
    <use xlink:href="#snowflake"  x="0" y="0" width="100" height="100" transform="translate(13,79) scale(1,1)"></use>
    <use xlink:href="#snowflake"  x="0" y="0" width="100" height="100" transform="translate(27,88) scale(1,1)"></use>
    <use xlink:href="#snowflake"  x="0" y="0" width="100" height="100" transform="translate(55,79) scale(1,1)"></use>
    <use xlink:href="#snowflake"  x="0" y="0" width="100" height="100" transform="translate(69,88) scale(1,1)"></use>
    <use xlink:href="#snowflake"  x="0" y="0" width="100" height="100" transform="translate(83,79) scale(1,1)"></use>
  </symbol>
  <symbol id="s46">
    <use xlink:href="#cloud" fill="#cccccc" x="0" y="0" width="100" height="100" transform="translate(3,18) scale(1,1)"></use>
    <use xlink:href="#raindrop"  x="0" y="0" width="100" height="100" transform="translate(32,87) scale(1,1)"></use>
    <use xlink:href="#raindrop"  x="0" y="0" width="100" height="100" transform="translate(56,78) scale(1,1)"></use>
  </symbol>
  <symbol id="s47">
    <use xlink:href="#cloud" fill="#cccccc" x="0" y="0" width="100" height="100" transform="translate(3,18) scale(1,1)"></use>
    <use xlink:href="#snowflake"  x="0" y="0" width="100" height="100" transform="translate(29,88) scale(1,1)"></use>
    <use xlink:href="#raindrop"  x="0" y="0" width="100" height="100" transform="translate(60,79) scale(1,1)"></use>
  </symbol>
  <symbol id="s48">
    <use xlink:href="#cloud" fill="#999999" x="0" y="0" width="100" height="100" transform="translate(3,18) scale(1,1)"></use>
    <use xlink:href="#snowflake"  x="0" y="0" width="100" height="100" transform="translate(15,79) scale(1,1)"></use>
    <use xlink:href="#raindrop"  x="0" y="0" width="100" height="100" transform="translate(32,86) scale(1,1)"></use>
    <use xlink:href="#raindrop"  x="0" y="0" width="100" height="100" transform="translate(47,80) scale(1,1)"></use>
    <use xlink:href="#snowflake"  x="0" y="0" width="100" height="100" transform="translate(58,88) scale(1,1)"></use>
    <use xlink:href="#raindrop"  x="0" y="0" width="100" height="100" transform="translate(74,80) scale(1,1)"></use>
  </symbol>
  <symbol id="s49">
    <use xlink:href="#cloud" fill="#cccccc" x="0" y="0" width="100" height="100" transform="translate(3,18) scale(1,1)"></use>
    <use xlink:href="#snowflake"  x="0" y="0" width="100" height="100" transform="translate(29,88) scale(1,1)"></use>
    <use xlink:href="#snowflake"  x="0" y="0" width="100" height="100" transform="translate(58,79) scale(1,1)"></use>
  </symbol>
  <symbol id="s50">
    <use xlink:href="#cloud" fill="#999999" x="0" y="0" width="100" height="100" transform="translate(3,18) scale(1,1)"></use>
    <use xlink:href="#snowflake"  x="0" y="0" width="100" height="100" transform="translate(15,79) scale(1,1)"></use>
    <use xlink:href="#snowflake"  x="0" y="0" width="100" height="100" transform="translate(29,88) scale(1,1)"></use>
    <use xlink:href="#snowflake"  x="0" y="0" width="100" height="100" transform="translate(44,79) scale(1,1)"></use>
    <use xlink:href="#snowflake"  x="0" y="0" width="100" height="100" transform="translate(58,88) scale(1,1)"></use>
    <use xlink:href="#snowflake"  x="0" y="0" width="100" height="100" transform="translate(72,79) scale(1,1)"></use>
  </symbol>
  <symbol id="s04">
    <use xlink:href="#cloud" fill="#dddddd" x="0" y="0" width="100" height="100" transform="translate(3,18) scale(1,1)"></use>
  </symbol>
  <symbol id="s09">
    <use xlink:href="#cloud" fill="#b2b2b2" x="0" y="0" width="100" height="100" transform="translate(3,18) scale(1,1)"></use>
    <use xlink:href="#raindrop"  x="0" y="0" width="100" height="100" transform="translate(32,78) scale(1,1)"></use>
    <use xlink:href="#raindrop"  x="0" y="0" width="100" height="100" transform="translate(45,87) scale(1,1)"></use>
    <use xlink:href="#raindrop"  x="0" y="0" width="100" height="100" transform="translate(60,78) scale(1,1)"></use>
  </symbol>
  <symbol id="s01d">
    <use xlink:href="#sun"  x="0" y="0" width="100" height="100" transform="translate(9,9) scale(1,1)"></use>
  </symbol>
  <symbol id="s02d">
    <g mask="url(#cloud_43_37_063_063_5)">
      <use xlink:href="#sun"  x="0" y="0" width="100" height="100" transform="translate(4,9) scale(1,1)"></use>
    </g>
    <use xlink:href="#cloud" fill="#dddddd" x="0" y="0" width="100" height="100" transform="translate(43,37) scale(0.63,0.63)"></use>
  </symbol>
  <symbol id="s03d">
    <g mask="url(#cloud_3_18_1_1_5)">
      <use xlink:href="#sun"  x="0" y="0" width="100" height="100" transform="translate(0,2) scale(0.7,0.7)"></use>
    </g>
    <use xlink:href="#s04" x="0" y="0" width="100" height="100"></use>
  </symbol>
  <symbol id="s40d">
    <g mask="url(#cloud_3_18_1_1_5)">
      <use xlink:href="#sun"  x="0" y="0" width="100" height="100" transform="translate(0,2) scale(0.7,0.7)"></use>
    </g>
    <use xlink:href="#s46" x="0" y="0" width="100" height="100"></use>
  </symbol>
  <symbol id="s05d">
    <g mask="url(#cloud_3_18_1_1_5)">
      <use xlink:href="#sun"  x="0" y="0" width="100" height="100" transform="translate(0,2) scale(0.7,0.7)"></use>
    </g>
    <use xlink:href="#s09" x="0" y="0" width="100" height="100"></use>
  </symbol>
  <symbol id="s41d">
    <g mask="url(#cloud_3_18_1_1_5)">
      <use xlink:href="#sun"  x="0" y="0" width="100" height="100" transform="translate(0,2) scale(0.7,0.7)"></use>
    </g>
    <use xlink:href="#s10" x="0" y="0" width="100" height="100"></use>
  </symbol>
  <symbol id="s42d">
    <g mask="url(#cloud_3_18_1_1_5)">
      <use xlink:href="#sun"  x="0" y="0" width="100" height="100" transform="translate(0,2) scale(0.7,0.7)"></use>
    </g>
    <use xlink:href="#s47" x="0" y="0" width="100" height="100"></use>
  </symbol>
  <symbol id="s07d">
    <g mask="url(#cloud_3_18_1_1_5)">
      <use xlink:href="#sun"  x="0" y="0" width="100" height="100" transform="translate(0,2) scale(0.7,0.7)"></use>
    </g>
    <use xlink:href="#s12" x="0" y="0" width="100" height="100"></use>
  </symbol>
  <symbol id="s43d">
    <g mask="url(#cloud_3_18_1_1_5)">
      <use xlink:href="#sun"  x="0" y="0" width="100" height="100" transform="translate(0,2) scale(0.7,0.7)"></use>
    </g>
    <use xlink:href="#s48" x="0" y="0" width="100" height="100"></use>
  </symbol>
  <symbol id="s44d">
    <g mask="url(#cloud_3_18_1_1_5)">
      <use xlink:href="#sun"  x="0" y="0" width="100" height="100" transform="translate(0,2) scale(0.7,0.7)"></use>
    </g>
    <use xlink:href="#s49" x="0" y="0" width="100" height="100"></use>
  </symbol>
  <symbol id="s08d">
    <g mask="url(#cloud_3_18_1_1_5)">
      <use xlink:href="#sun"  x="0" y="0" width="100" height="100" transform="translate(0,2) scale(0.7,0.7)"></use>
    </g>
    <use xlink:href="#s13" x="0" y="0" width="100" height="100"></use>
  </symbol>
  <symbol id="s45d">
    <g mask="url(#cloud_3_18_1_1_5)">
      <use xlink:href="#sun"  x="0" y="0" width="100" height="100" transform="translate(0,2) scale(0.7,0.7)"></use>
    </g>
    <use xlink:href="#s50" x="0" y="0" width="100" height="100"></use>
  </symbol>
  <symbol id="s24d">
    <g mask="url(#cloud_3_18_1_1_5)">
      <use xlink:href="#sun"  x="0" y="0" width="100" height="100" transform="translate(0,2) scale(0.7,0.7)"></use>
    </g>
    <use xlink:href="#s30" x="0" y="0" width="100" height="100"></use>
  </symbol>
  <symbol id="s06d">
    <g mask="url(#cloud_3_18_1_1_5)">
      <use xlink:href="#sun"  x="0" y="0" width="100" height="100" transform="translate(0,2) scale(0.7,0.7)"></use>
    </g>
    <use xlink:href="#s22" x="0" y="0" width="100" height="100"></use>
  </symbol>
  <symbol id="s25d">
    <g mask="url(#cloud_3_18_1_1_5)">
      <use xlink:href="#sun"  x="0" y="0" width="100" height="100" transform="translate(0,2) scale(0.7,0.7)"></use>
    </g>
    <use xlink:href="#s11" x="0" y="0" width="100" height="100"></use>
  </symbol>
  <symbol id="s26d">
    <g mask="url(#cloud_3_18_1_1_5)">
      <use xlink:href="#sun"  x="0" y="0" width="100" height="100" transform="translate(0,2) scale(0.7,0.7)"></use>
    </g>
    <use xlink:href="#s31" x="0" y="0" width="100" height="100"></use>
  </symbol>
  <symbol id="s20d">
    <g mask="url(#cloud_3_18_1_1_5)">
      <use xlink:href="#sun"  x="0" y="0" width="100" height="100" transform="translate(0,2) scale(0.7,0.7)"></use>
    </g>
    <use xlink:href="#s23" x="0" y="0" width="100" height="100"></use>
  </symbol>
  <symbol id="s27d">
    <g mask="url(#cloud_3_18_1_1_5)">
      <use xlink:href="#sun"  x="0" y="0" width="100" height="100" transform="translate(0,2) scale(0.7,0.7)"></use>
    </g>
    <use xlink:href="#s32" x="0" y="0" width="100" height="100"></use>
  </symbol>
  <symbol id="s28d">
    <g mask="url(#cloud_3_18_1_1_5)">
      <use xlink:href="#sun"  x="0" y="0" width="100" height="100" transform="translate(0,2) scale(0.7,0.7)"></use>
    </g>
    <use xlink:href="#s33" x="0" y="0" width="100" height="100"></use>
  </symbol>
  <symbol id="s21d">
    <g mask="url(#cloud_3_18_1_1_5)">
      <use xlink:href="#sun"  x="0" y="0" width="100" height="100" transform="translate(0,2) scale(0.7,0.7)"></use>
    </g>
    <use xlink:href="#s14" x="0" y="0" width="100" height="100"></use>
  </symbol>
  <symbol id="s29d">
    <g mask="url(#cloud_3_18_1_1_5)">
      <use xlink:href="#sun"  x="0" y="0" width="100" height="100" transform="translate(0,2) scale(0.7,0.7)"></use>
    </g>
    <use xlink:href="#s34" x="0" y="0" width="100" height="100"></use>
  </symbol>
  <symbol id="s01n">
    <use xlink:href="#moon"  x="0" y="0" width="100" height="100" transform="translate(20,20) scale(1,1)"></use>
  </symbol>
  <symbol id="s02n">
    <g mask="url(#cloud_43_37_063_063_5)">
      <use xlink:href="#moon"  x="0" y="0" width="100" height="100" transform="translate(15,20) scale(1,1)"></use>
    </g>
    <use xlink:href="#cloud" fill="#dddddd" x="0" y="0" width="100" height="100" transform="translate(43,37) scale(0.63,0.63)"></use>
  </symbol>
  <symbol id="s03n">
    <g mask="url(#cloud_3_18_1_1_5)">
      <use xlink:href="#moon"  x="0" y="0" width="100" height="100" transform="translate(2,5) scale(0.714285714,0.714285714)"></use>
    </g>
    <use xlink:href="#s04" x="0" y="0" width="100" height="100"></use>
  </symbol>
  <symbol id="s40n">
    <g mask="url(#cloud_3_18_1_1_5)">
      <use xlink:href="#moon"  x="0" y="0" width="100" height="100" transform="translate(2,5) scale(0.714285714,0.714285714)"></use>
    </g>
    <use xlink:href="#s46" x="0" y="0" width="100" height="100"></use>
  </symbol>
  <symbol id="s05n">
    <g mask="url(#cloud_3_18_1_1_5)">
      <use xlink:href="#moon"  x="0" y="0" width="100" height="100" transform="translate(2,5) scale(0.714285714,0.714285714)"></use>
    </g>
    <use xlink:href="#s09" x="0" y="0" width="100" height="100"></use>
  </symbol>
  <symbol id="s41n">
    <g mask="url(#cloud_3_18_1_1_5)">
      <use xlink:href="#moon"  x="0" y="0" width="100" height="100" transform="translate(2,5) scale(0.714285714,0.714285714)"></use>
    </g>
    <use xlink:href="#s10" x="0" y="0" width="100" height="100"></use>
  </symbol>
  <symbol id="s42n">
    <g mask="url(#cloud_3_18_1_1_5)">
      <use xlink:href="#moon"  x="0" y="0" width="100" height="100" transform="translate(2,5) scale(0.714285714,0.714285714)"></use>
    </g>
    <use xlink:href="#s47" x="0" y="0" width="100" height="100"></use>
  </symbol>
  <symbol id="s07n">
    <g mask="url(#cloud_3_18_1_1_5)">
      <use xlink:href="#moon"  x="0" y="0" width="100" height="100" transform="translate(2,5) scale(0.714285714,0.714285714)"></use>
    </g>
    <use xlink:href="#s12" x="0" y="0" width="100" height="100"></use>
  </symbol>
  <symbol id="s43n">
    <g mask="url(#cloud_3_18_1_1_5)">
      <use xlink:href="#moon"  x="0" y="0" width="100" height="100" transform="translate(2,5) scale(0.714285714,0.714285714)"></use>
    </g>
    <use xlink:href="#s48" x="0" y="0" width="100" height="100"></use>
  </symbol>
  <symbol id="s44n">
    <g mask="url(#cloud_3_18_1_1_5)">
      <use xlink:href="#moon"  x="0" y="0" width="100" height="100" transform="translate(2,5) scale(0.714285714,0.714285714)"></use>
    </g>
    <use xlink:href="#s49" x="0" y="0" width="100" height="100"></use>
  </symbol>
  <symbol id="s08n">
    <g mask="url(#cloud_3_18_1_1_5)">
      <use xlink:href="#moon"  x="0" y="0" width="100" height="100" transform="translate(2,5) scale(0.714285714,0.714285714)"></use>
    </g>
    <use xlink:href="#s13" x="0" y="0" width="100" height="100"></use>
  </symbol>
  <symbol id="s45n">
    <g mask="url(#cloud_3_18_1_1_5)">
      <use xlink:href="#moon"  x="0" y="0" width="100" height="100" transform="translate(2,5) scale(0.714285714,0.714285714)"></use>
    </g>
    <use xlink:href="#s50" x="0" y="0" width="100" height="100"></use>
  </symbol>
  <symbol id="s24n">
    <g mask="url(#cloud_3_18_1_1_5)">
      <use xlink:href="#moon"  x="0" y="0" width="100" height="100" transform="translate(2,5) scale(0.714285714,0.714285714)"></use>
    </g>
    <use xlink:href="#s30" x="0" y="0" width="100" height="100"></use>
  </symbol>
  <symbol id="s06n">
    <g mask="url(#cloud_3_18_1_1_5)">
      <use xlink:href="#moon"  x="0" y="0" width="100" height="100" transform="translate(2,5) scale(0.714285714,0.714285714)"></use>
    </g>
    <use xlink:href="#s22" x="0" y="0" width="100" height="100"></use>
  </symbol>
  <symbol id="s25n">
    <g mask="url(#cloud_3_18_1_1_5)">
      <use xlink:href="#moon"  x="0" y="0" width="100" height="100" transform="translate(2,5) scale(0.714285714,0.714285714)"></use>
    </g>
    <use xlink:href="#s11" x="0" y="0" width="100" height="100"></use>
  </symbol>
  <symbol id="s26n">
    <g mask="url(#cloud_3_18_1_1_5)">
      <use xlink:href="#moon"  x="0" y="0" width="100" height="100" transform="translate(2,5) scale(0.714285714,0.714285714)"></use>
    </g>
    <use xlink:href="#s31" x="0" y="0" width="100" height="100"></use>
  </symbol>
  <symbol id="s20n">
    <g mask="url(#cloud_3_18_1_1_5)">
      <use xlink:href="#moon"  x="0" y="0" width="100" height="100" transform="translate(2,5) scale(0.714285714,0.714285714)"></use>
    </g>
    <use xlink:href="#s23" x="0" y="0" width="100" height="100"></use>
  </symbol>
  <symbol id="s27n">
    <g mask="url(#cloud_3_18_1_1_5)">
      <use xlink:href="#moon"  x="0" y="0" width="100" height="100" transform="translate(2,5) scale(0.714285714,0.714285714)"></use>
    </g>
    <use xlink:href="#s32" x="0" y="0" width="100" height="100"></use>
  </symbol>
  <symbol id="s28n">
    <g mask="url(#cloud_3_18_1_1_5)">
      <use xlink:href="#moon"  x="0" y="0" width="100" height="100" transform="translate(2,5) scale(0.714285714,0.714285714)"></use>
    </g>
    <use xlink:href="#s33" x="0" y="0" width="100" height="100"></use>
  </symbol>
  <symbol id="s21n">
    <g mask="url(#cloud_3_18_1_1_5)">
      <use xlink:href="#moon"  x="0" y="0" width="100" height="100" transform="translate(2,5) scale(0.714285714,0.714285714)"></use>
    </g>
    <use xlink:href="#s14" x="0" y="0" width="100" height="100"></use>
  </symbol>
  <symbol id="s29n">
    <g mask="url(#cloud_3_18_1_1_5)">
      <use xlink:href="#moon"  x="0" y="0" width="100" height="100" transform="translate(2,5) scale(0.714285714,0.714285714)"></use>
    </g>
    <use xlink:href="#s34" x="0" y="0" width="100" height="100"></use>
  </symbol>
  <symbol id="s01m">
    <use xlink:href="#sunWinter"  x="0" y="0" width="100" height="100" transform="translate(5,37) scale(1,1)"></use>
  </symbol>
  <symbol id="s02m">
    <g mask="url(#cloud_43_37_063_063_5)">
      <use xlink:href="#sunWinter"  x="0" y="0" width="100" height="100" transform="translate(0,37) scale(1,1)"></use>
    </g>
    <use xlink:href="#cloud" fill="#dddddd" x="0" y="0" width="100" height="100" transform="translate(43,37) scale(0.63,0.63)"></use>
  </symbol>
  <symbol id="s03m">
    <g mask="url(#cloud_3_18_1_1_5)">
      <use xlink:href="#sunWinter"  x="0" y="0" width="100" height="100" transform="translate(0,19) scale(0.7,0.7)"></use>
    </g>
    <use xlink:href="#s04" x="0" y="0" width="100" height="100"></use>
  </symbol>
  <symbol id="s40m">
    <g mask="url(#cloud_3_18_1_1_5)">
      <use xlink:href="#sunWinter"  x="0" y="0" width="100" height="100" transform="translate(0,19) scale(0.7,0.7)"></use>
    </g>
    <use xlink:href="#s46" x="0" y="0" width="100" height="100"></use>
  </symbol>
  <symbol id="s05m">
    <g mask="url(#cloud_3_18_1_1_5)">
      <use xlink:href="#sunWinter"  x="0" y="0" width="100" height="100" transform="translate(0,19) scale(0.7,0.7)"></use>
    </g>
    <use xlink:href="#s09" x="0" y="0" width="100" height="100"></use>
  </symbol>
  <symbol id="s41m">
    <g mask="url(#cloud_3_18_1_1_5)">
      <use xlink:href="#sunWinter"  x="0" y="0" width="100" height="100" transform="translate(0,19) scale(0.7,0.7)"></use>
    </g>
    <use xlink:href="#s10" x="0" y="0" width="100" height="100"></use>
  </symbol>
  <symbol id="s42m">
    <g mask="url(#cloud_3_18_1_1_5)">
      <use xlink:href="#sunWinter"  x="0" y="0" width="100" height="100" transform="translate(0,19) scale(0.7,0.7)"></use>
    </g>
    <use xlink:href="#s47" x="0" y="0" width="100" height="100"></use>
  </symbol>
  <symbol id="s07m">
    <g mask="url(#cloud_3_18_1_1_5)">
      <use xlink:href="#sunWinter"  x="0" y="0" width="100" height="100" transform="translate(0,19) scale(0.7,0.7)"></use>
    </g>
    <use xlink:href="#s12" x="0" y="0" width="100" height="100"></use>
  </symbol>
  <symbol id="s43m">
    <g mask="url(#cloud_3_18_1_1_5)">
      <use xlink:href="#sunWinter"  x="0" y="0" width="100" height="100" transform="translate(0,19) scale(0.7,0.7)"></use>
    </g>
    <use xlink:href="#s48" x="0" y="0" width="100" height="100"></use>
  </symbol>
  <symbol id="s44m">
    <g mask="url(#cloud_3_18_1_1_5)">
      <use xlink:href="#sunWinter"  x="0" y="0" width="100" height="100" transform="translate(0,19) scale(0.7,0.7)"></use>
    </g>
    <use xlink:href="#s49" x="0" y="0" width="100" height="100"></use>
  </symbol>
  <symbol id="s08m">
    <g mask="url(#cloud_3_18_1_1_5)">
      <use xlink:href="#sunWinter"  x="0" y="0" width="100" height="100" transform="translate(0,19) scale(0.7,0.7)"></use>
    </g>
    <use xlink:href="#s13" x="0" y="0" width="100" height="100"></use>
  </symbol>
  <symbol id="s45m">
    <g mask="url(#cloud_3_18_1_1_5)">
      <use xlink:href="#sunWinter"  x="0" y="0" width="100" height="100" transform="translate(0,19) scale(0.7,0.7)"></use>
    </g>
    <use xlink:href="#s50" x="0" y="0" width="100" height="100"></use>
  </symbol>
  <symbol id="s24m">
    <g mask="url(#cloud_3_18_1_1_5)">
      <use xlink:href="#sunWinter"  x="0" y="0" width="100" height="100" transform="translate(0,19) scale(0.7,0.7)"></use>
    </g>
    <use xlink:href="#s30" x="0" y="0" width="100" height="100"></use>
  </symbol>
  <symbol id="s06m">
    <g mask="url(#cloud_3_18_1_1_5)">
      <use xlink:href="#sunWinter"  x="0" y="0" width="100" height="100" transform="translate(0,19) scale(0.7,0.7)"></use>
    </g>
    <use xlink:href="#s22" x="0" y="0" width="100" height="100"></use>
  </symbol>
  <symbol id="s25m">
    <g mask="url(#cloud_3_18_1_1_5)">
      <use xlink:href="#sunWinter"  x="0" y="0" width="100" height="100" transform="translate(0,19) scale(0.7,0.7)"></use>
    </g>
    <use xlink:href="#s11" x="0" y="0" width="100" height="100"></use>
  </symbol>
  <symbol id="s26m">
    <g mask="url(#cloud_3_18_1_1_5)">
      <use xlink:href="#sunWinter"  x="0" y="0" width="100" height="100" transform="translate(0,19) scale(0.7,0.7)"></use>
    </g>
    <use xlink:href="#s31" x="0" y="0" width="100" height="100"></use>
  </symbol>
  <symbol id="s20m">
    <g mask="url(#cloud_3_18_1_1_5)">
      <use xlink:href="#sunWinter"  x="0" y="0" width="100" height="100" transform="translate(0,19) scale(0.7,0.7)"></use>
    </g>
    <use xlink:href="#s23" x="0" y="0" width="100" height="100"></use>
  </symbol>
  <symbol id="s27m">
    <g mask="url(#cloud_3_18_1_1_5)">
      <use xlink:href="#sunWinter"  x="0" y="0" width="100" height="100" transform="translate(0,19) scale(0.7,0.7)"></use>
    </g>
    <use xlink:href="#s32" x="0" y="0" width="100" height="100"></use>
  </symbol>
  <symbol id="s28m">
    <g mask="url(#cloud_3_18_1_1_5)">
      <use xlink:href="#sunWinter"  x="0" y="0" width="100" height="100" transform="translate(0,19) scale(0.7,0.7)"></use>
    </g>
    <use xlink:href="#s33" x="0" y="0" width="100" height="100"></use>
  </symbol>
  <symbol id="s21m">
    <g mask="url(#cloud_3_18_1_1_5)">
      <use xlink:href="#sunWinter"  x="0" y="0" width="100" height="100" transform="translate(0,19) scale(0.7,0.7)"></use>
    </g>
    <use xlink:href="#s14" x="0" y="0" width="100" height="100"></use>
  </symbol>
  <symbol id="s29m">
    <g mask="url(#cloud_3_18_1_1_5)">
      <use xlink:href="#sunWinter"  x="0" y="0" width="100" height="100" transform="translate(0,19) scale(0.7,0.7)"></use>
    </g>
    <use xlink:href="#s34" x="0" y="0" width="100" height="100"></use>
  </symbol>
  <g style="clip-path: url(#temperature-clip-blue-PunktUtlandet:2800931); -webkit-clip-path: url(#temperature-clip-blue-PunktUtlandet:2800931);">
  <g style="clip-path: url(#temperature-clip-red-PunktUtlandet:2800931); -webkit-clip-path: url(#temperature-clip-red-PunktUtlandet:2800931);">
</svg>
<div id="status"><span id="statuswireless"></span></div>
<div id="content"></div>
</body>
</html>
